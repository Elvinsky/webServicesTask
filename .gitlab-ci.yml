stages:
  - lint
  - test
  - build

lint_and_format:
  stage: lint
  script:
    - cd client
    - npm ci
    - npm run lint
    - npm run format
  only:
    - main

test_server:
  stage: test
  script:
    - cd server
    - npm ci
    - npm run test
  only:
    - main

build_client:
  stage: build
  script:
    - cd client
    - npm ci
    - npm run build-only
  only:
    - main
